<div class="main">
  <div class="row cust-row">
    <div class="col-12 line-base" style="border-bottom: 1px solid #c8ced3;padding: 10px 0; ">
      <div class="title-head">
        <mat-icon style="font-size: 30px; height: 30px; width: 38px; text-indent: 5px">search</mat-icon>
        <span class="text" style="padding: 5px 0;">TÌM KIẾM THÔNG TIN KHÁCH HÀNG</span>
      </div>
    </div>
    <div class="col-12 information-section">
      <div class="input-search">
        <div class="form-group row">
          <label for="inputPassword3" class="col-sm-2 col-form-label formSearch" style="text-align: right;">Khách hàng
            cá nhân
            <span class="require-tilte">(*)</span>
          </label>
          <div class="input-group">
            <input type="text" class="form-control" (input)="onValueSearchChange()" id="inputPassword3"
              placeholder="Nhập giá trị tìm kiếm" [(ngModel)]="valueSearch" [ngClass]="{'is-invalid': valueSearchValid}"
              (keydown.enter)="searchCustomer()">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" (click)="searchCustomer()" type="button">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
              <app-lpb-modal headerText="Danh sách khách hàng" [show]="isListCustomer" [unit]="'%'" [widthContent]="65"
                [heightContent]="50" (hideModal)="isListCustomer = false">
                <div class="popup-table">
                  <div class="table table-striped content-table">
                    <table>
                      <thead>
                        <tr class="text-nowrap">
                          <th>Tên khách hàng</th>
                          <th>Mã CIF</th>
                          <th>Số GTXM</th>
                          <th>Ngày cấp GTXM</th>
                          <th>Nơi cấp GTXM</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of customers;let i = index"
                          [ngStyle]="{'background-color': i % 2 == 0  ? 'rgba(0,0,0,.05)' : null }"
                          (click)="selectCustomer(item)">
                          <ng-template [ngIf]="items.length !== 0 && pendingProcessList.length === 0">
                            <td class="link-action">{{item.FULL_NAME}}</td>
                            <td>{{item.CUSTOMER_NO }}</td>
                            <td>{{item.UID_VALUE }}</td>
                            <td>{{item.NGAY_CAP }}</td>
                            <td>{{item.NOI_CAP}}</td>
                          </ng-template>
                          <ng-template [ngIf]="pendingProcessList.length !== 0">
                            <td class="link-action">{{item.fullName}}</td>
                            <td>{{item.customerCode}}</td>
                            <td>{{item.perDocNo}}</td>
                            <td>{{item.issueDate }}</td>
                            <td>{{item.issuePlace}}</td>
                          </ng-template>
                        </tr>
                      </tbody>
                    </table>
                    <div class="div-center">
                      {{msgEmpty}}
                    </div>
                    <div class="btn-action">
                      <button class="btn-close btn mr-2" (click)="closePopup()">Đóng</button>
                      <button class="btn-new btn mr-2" *ngIf="isCreateCIF" (click)="routerRegisterCif()">Tạo
                        mới</button>
                    </div>
                  </div>
                </div>
              </app-lpb-modal>
            </div>
          </div>
        </div>
        <div class="row location-msg">
          <div class="col-2">
          </div>
          <div class="col-9 error-msg">{{errMsgSearchCustomer}}</div>
        </div>
        <div class="row">
          <div class="col-2">
          </div>
          <div class="cust-row-search">
            <div class="row-item-info">
              <div class="label-field"></div>
              <div class="value-field">
                <div class="control-item rd-nowrap-text">
                  <div class="grRadio">
                    <div class="rd-item">
                      <input type="radio" class="mr-1" (ngModelChange)="typeCustomerChange($event)"
                        [(ngModel)]="typeCustomer" name="typeCustomer" id="rd-1" value="{{typeParamSearch.cmnd}}">
                      <label for="rd-1">
                        CMND
                      </label>
                    </div>
                    <div class="rd-item">
                      <input type="radio" class="mr-1" (ngModelChange)="typeCustomerChange($event)"
                        [(ngModel)]="typeCustomer" name="typeCustomer" id="rd-2" value="{{typeParamSearch.gks}}">
                      <label for="rd-2">
                        Giấy Khai Sinh
                      </label>
                    </div>
                    <div class="rd-item">
                      <input type="radio" class="mr-1" (ngModelChange)="typeCustomerChange($event)"
                        [(ngModel)]="typeCustomer" name="typeCustomer" id="rd-3" value="{{typeParamSearch.cccd}}">
                      <label for="rd-3">
                        CCCD
                      </label>
                    </div>
                    <div class="rd-item">
                      <input type="radio" class="mr-1" (ngModelChange)="typeCustomerChange($event)"
                        [(ngModel)]="typeCustomer" name="typeCustomer" id="rd-4" value="{{typeParamSearch.hc}}">
                      <label for="rd-4">
                        Hộ chiếu
                      </label>
                    </div>
                    <div class="rd-item">
                      <input type="radio" class="mr-1" (ngModelChange)="typeCustomerChange($event)"
                        [(ngModel)]="typeCustomer" name="typeCustomer" id="rd-5" value="{{typeParamSearch.cif}}">
                      <label for="rd-5">
                        Mã CIF
                      </label>
                    </div>
                    <div class="rd-item">
                      <input type="radio" class="mr-1" (ngModelChange)="typeCustomerChange($event)"
                        [(ngModel)]="typeCustomer" name="typeCustomer" id="rd-6" value="{{typeParamSearch.sdt}}">
                      <label for="rd-6">
                        Số điện thoại
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row cust-row" style="clear: both;margin-top: 5px;">
    <div class="col-12 line-base" style="border-bottom: 1px solid #c8ced3;padding: 10px 0; ">
      <div class="title-head" style="font-weight: 500;">
        <mat-icon style="font-size: 30px; height: 30px; width: 38px; text-indent: 5px">view_list</mat-icon>
        <span class="text" style="padding: 5px 0;">DANH SÁCH HỒ SƠ ĐANG XỬ LÝ</span>
      </div>
    </div>
    <div class=" mat-elevation-z8">
      <table class="table table-responsive table-fixed">
        <thead>
          <tr class="titleTD">
            <th style="width: 50px">STT</th>
            <th>Mã hồ sơ</th>
            <th>Tên khách hàng</th>
            <th>Ngày tạo</th>
            <th>Người tạo</th>
            <th>Trạng thái</th>
            <th>Chi nhánh</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let process of processList; index as i" tabindex="0">
            <td style="width: 50px">{{pagination.pager.startIndex + i + 1}}</td>
            <td class="col-xs-6" style="text-align: center">
              <a [routerLink]="['/smart-form/manager/fileProcessed',process.id]">{{process.code}}</a>
            </td>
            <td class="file-name col-xs-6">{{process.fullName}}</td>
            <td class="file-name col-xs-6" style="text-align: center">{{process.createdDate | date: "HH:mm:ss
              dd/MM/yyyy"}}</td>
            <td class="file-name col-xs-6" style="text-align: center">{{process.createdByUser?.userName}}</td>
            <td class="file-name col-xs-6" style="text-align: center">{{process.statusName}}</td>
            <td class="file-name col-xs-6" style="text-align: center">{{process.branch?.code}} -
              {{process.branch?.address}}</td>
            <td colspan="8" *ngIf="processList && processList.length == 0">
              Không có dữ liệu
            </td>
          </tr>
          <tr *ngIf="processList && processList.length == 0 || processList == null">
            <td colspan="9" style="text-align: center;">
              Không có dữ liệu
            </td>
          </tr>
        </tbody>
      </table>
      <nav aria-label="Page navigation for action list"
        style="padding-bottom: 10px;margin-left: 10px;margin-right: 5px;padding-top: 10px;"
        *ngIf="pagination.pager && pagination.pager.pages && pagination.pager.pages.length">
        <div style="float: left; padding-top: 10px;">
          <span>{{pagination.pager.getStatus()}}</span>
        </div>
        <ul class="pagination justify-content-end">
          <div class="amout-show">
            <span>Số lượng bản ghi/trang</span> &nbsp;
            <select class="form-control numberPage" (change)="changePageSize($event.target.value,0)">
              <option selected value="10">10</option>
              <option value="20">20</option>
              <option value="50">50</option>
            </select> &nbsp;&nbsp;
          </div>
          <li class="page-item" (click)="setPage(pagination.pager.currentPage - 1)">
            <a class="page-link" href="javascript: void(0)" tabindex="-1">&lt;</a>
          </li>
          <li class="page-item" *ngFor="let page of pagination.pager.pages"
            [ngClass]="{active:pagination.pager.currentPage === page}" (click)="setPage(page)">
            <a class="page-link" href="javascript: void(0)">{{page}}</a>
          </li>
          <li class="page-item" (click)="setPage(pagination.pager.currentPage + 1)">

            <a class="page-link" href="javascript: void(0)">&gt;</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>