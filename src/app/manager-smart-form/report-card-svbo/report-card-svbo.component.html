<div class="m">
  <div class="container-fluid cust-row">
    <div class="title-head line-base st-title">
      <span class="text">BÁO CÁO CẬP NHẬT CIF SANG SVBO</span>
    </div>

    <form [formGroup]="reportCardForm">
      <div class="row form">
        <div class="col-6 label-form" >
          <div class="form-group row">
            <label class="col-sm-4 col-form-label textLabel">Từ ngày </label>
            <div class="col-sm-8 ">
              <app-lpb-date-picker #dpCreatedDateFrom (dateChanged)="updatedDateFromChanged()"
                                   [maxDate]="getToday()" ></app-lpb-date-picker>
              <div *ngIf="reportCardForm.errors?.validateDate" class="error-message">
                Từ ngày phải nhỏ hơn đến ngày
              </div>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-4 col-form-label textLabel">CIF </label>
            <div class="col-sm-8 ">
              <input class="form-control" type="text" numbersOnly formControlName="customerCode">
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-4 col-form-label textLabel">Trạng thái </label>
            <div class="col-sm-8 ">
              <select class="form-control " style="height: 36px; padding-bottom: .2rem" formControlName="serviceStatus">
                <option *ngFor="let status of statusUpdateCif" [value]="status.statusCode">
                  {{status.statusName}}
                </option>
              </select>
            </div>
          </div>
        </div>

        <div class="col-6 label-form">
          <div class="form-group row">
            <label class="col-sm-4 col-form-label textLabel">Đến ngày </label>
            <div class="col-sm-8 ">
              <app-lpb-date-picker #dpCreatedDateTo (dateChanged)="updatedDateToChanged()"
                                   [maxDate]="getToday()"></app-lpb-date-picker>
              <div *ngIf="reportCardForm.errors?.validateDate" class="error-message">
                Đến ngày phải lớn hơn từ ngày
              </div>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label textLabel">Chi nhánh</label>
            <div class="col-sm-8 ">
              <ng-select [multiple]="false" bindLabel="name" bindValue="code" formControlName="branchCode"
                         placeholder="-- Chọn chi nhánh --">
                <ng-option *ngFor="let branch of branchesData" [value]="branch.code">{{branch.branchCodeName}}</ng-option>
              </ng-select>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 text-center">
        <button (click)="searchList()" type="submit" class="btn btn-color" style="width: 150px;color: white;">
          <i class="fa fa-search" style="color: white"></i>
          Tìm kiếm
        </button>
      </div>
    </form>

    <button (click)="exportFile()" type="button" class="btn mt-3" style="background-color: #f47326; color: white; margin: 7px 0">
      <i class="fa fa-print" style="color: white"></i>
      Xuất dữ liệu
    </button>

    <div class="mat-elevation-z8">
      <table class="table table-responsive table-fixed">
        <thead>
        <tr class="titleTD">
          <th style="width: 50px; text-align: center;">STT</th>
          <th class="progressCode">Mã hồ sơ</th>
          <th>Loại dich vụ</th>
          <th>CIF</th>
          <th>Tên khách hàng</th>
          <th>Trạng Thái</th>
          <th>Ngày Nhập</th>
          <th>Ngày Duyệt</th>
          <th>Người Nhập</th>
          <th>Người Duyệt</th>
          <th class="statusSVBO">Trạng thái SVBO</th>
          <th class="errorCode">Mã Lỗi</th>
          <th>Ngày update SVBO</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let info of cardReportOut ; let i = index" tabindex="0">
          <td style="width: 50px; text-align: center;">{{pagination.pager.startIndex + i + 1}}</td>
          <td class="progressCode">{{info.processCode}}</td>
          <td>{{info.serviceType}}</td>
          <td>{{info.customerCode}}</td>
          <td>{{info.fullName}}</td>
          <td>{{info.bankServiceStatusName}}</td>
          <td>{{info.createdDate}}</td>
          <td>{{info.approvedDate}}</td>
          <td>{{info.createdBy}}</td>
          <td>{{info.approvedBy}}</td>
          <td class="statusSVBO">{{info.otherServiceStatusName}}</td>
          <td class="errorCode">{{info.errorCode}}</td>
          <td>{{info.updatedDate}}</td>
        </tr>
        <tr aria-colspan="9" style="text-align: center; margin-top: 15px"
            *ngIf="cardReportOut == null || cardReportOut.length == 0">
          Không tìm thấy dữ liệu
        </tr>
        </tbody>
      </table>

      <nav aria-label="Page navigation for action list"
           style="padding-bottom: 10px;margin-left: 10px;margin-right: 5px;padding-top: 10px;"
           *ngIf="pagination.pager && pagination.pager.pages && pagination.pager.pages.length">
        <div style="float: left; padding-top: 10px;">
          <span>{{pagination.pager.getStatus()}}</span>
        </div>
        <ul class="pagination justify-content-end">
          <div class="amout-show">
            <span>Số lượng bản ghi/trang</span> &nbsp;
            <select class="form-control numberPage" (change)="changePageSize($event.target.value)">
              <option selected value="10">10</option>
              <option value="20">20</option>
              <option value="50">50</option>
            </select> &nbsp;&nbsp;
          </div>

          <li class="page-item" (click)="setPage(pagination.pager.currentPage - 1)">
            <a class="page-link" href="javascript: void(0)" tabindex="-1">&lt;</a>
          </li>
          <li class="page-item" *ngFor="let page of pagination.pager.pages"
              [ngClass]="{active:pagination.pager.currentPage === page}" (click)="setPage(page)">
            <a class="page-link" href="javascript: void(0)">{{page}}</a>
          </li>
          <li class="page-item" (click)="setPage(pagination.pager.currentPage + 1)">

            <a class="page-link" href="javascript: void(0)">&gt;</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

