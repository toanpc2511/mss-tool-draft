<div class="card">
  <div class="card-body">
    <div class="row view-inform" style="background-color: #fff; " [formGroup]="actionFormGroup">
      <div class="col-4" style="float: left;">
        <div class="form-group" style="margin-bottom: 0px;display: flex;">
          <label class="col-5 col-form-label" style="text-align: right;float: left;">
            Mã Function
          </label>
          <app-lpb-select2  [config]="{isNewApi : false, sort: true}" labelName="name" apiUrl="/admin/function/listAll" class="col-7" formControlName="functionCode"></app-lpb-select2>
        </div>
      </div>
      <div class="col-3" style="float: left;">
        <div class="form-group" style="margin-bottom: 0px;display: flex;">
          <label class="col-5 col-form-label" style="text-align: right;float: left;padding-right: 15px;">
            Parent Action
          </label>
          <app-lpb-select2  class="col-7"  [config]="{isNewApi : false}"  [apiUrl]="cbActionUrl" labelName="name" bindValue="id" formControlName="parentId"></app-lpb-select2>
        </div>
      </div>

      <div class="col-3" style="float: left;">
        <div class="form-group" style="margin-bottom: 0px;display: flex;">
          <label class="col-5 col-form-label" style="text-align: right;float: left;padding-right: 15px;">
            Keyword
          </label>
          <input type="text" class="form-control" formControlName="textSearch">
        </div>
      </div>
      <div class="col-3" style="float: left;">
        <div class="form-group" style="margin-bottom: 0px;display: flex;">
          <button class="btn newfile btn-color" (click)="searchAction()">Tìm Kiếm</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row view-inform"  style="margin-top: 5px;border: 1px solid #c8ced3;margin-bottom: 20px;">
  <div class="col-12" style="padding: 0px; clear: both;">
    <div class="row" style="margin: 0px;">
      <div class="col" style="background: white;margin-right: 0px;">
        <div class="title-note" style="padding: 0.5em;border-bottom: 1px solid #c8ced3;">
          <label style="font-size: 17px;
                            font-weight: 500;margin: 0px;">DANH SÁCH ACTION</label>
          <span class="material-icons spanCursor view-inform" (click)="addAction()" *ngIf="isAdmin" style="color: blue;float: right;padding: 0.15em;cursor:pointer;" >add</span>

        </div>
        <!-- danh sách -->
        <div class="  mat-elevation-z8">
          <table class="table">
            <tr class="titleTD">
<!--              <th style="width: 10%;">Mã Function</th>-->
              <th style="width: 10%;">Mã action</th>
              <th style="width: 20%;">Tên Action</th>
              <th style="width: 15%;">Url</th>
              <th style="width: 5%;">Method</th>
              <th style="width: 5%;">Tab Order</th>
              <th style="width: 15%;">FE URL</th>
              <th style="width: 10%;">Image</th>
<!--              <th style=" width: 10%;">Trạng thái</th>-->
              <th style="width: 10%">Hành động</th>
            </tr>
            <tr>
              <td colspan="7" style="text-align: center;height: 35px;" *ngIf="actions == null">
                <label>Không có bản ghi</label>
              </td>
            </tr>
            <tr *ngFor="let action of actions" class="hoverTr">
<!--              <td>{{action.functionCode}}</td>-->
              <td>{{action.code}}</td>
              <td>{{action.parentName}}</td>
              <td>{{action.url}}</td>
              <td>{{action.method}}</td>
              <td>{{action.tabOrder}}</td>
              <td>{{action.feUrl}}</td>
              <td>{{action.imagePath}}</td>
<!--              <td style="text-align: center;">{{getStatusCode(action.statusCode)}}</td>-->
              <td>
                <div class="text-center">
                  <button class="btn" style="background-color:transparent;" (click)="editAction(action)">
                    <i  style="margin-right: 5px;" class="fa fa-pencil-square-o" *ngIf="isAdmin"  aria-hidden="true"></i>
                  </button>
                  <button class="btn" style="background-color:transparent;" (click)="deleteAction(action)">
                    <i style="margin-right: 5px;" class="fa fa-trash-o"  *ngIf="isAdmin" aria-hidden="true"></i>
                  </button>
                  <button class="btn" style="background-color:transparent;" (click)="cloneAction(action)">
                    <i style="margin-right: 5px;" class="fa fa-copy"  *ngIf="isAdmin" aria-hidden="true"></i>
                  </button>
                </div>



              </td>
            </tr>

          </table>
          <nav aria-label="Page navigation for action list" style="padding-bottom: 10px;margin-left: 10px;margin-right: 5px;padding-top: 10px;" *ngIf="pager.pager && pager.pager.pages && pager.pager.pages.length">
            <div style="float: left; padding-top: 10px;">
              <span>{{pager.pager.getStatus()}}</span>
            </div>
            <ul class="pagination justify-content-end">
              <div class="amout-show">
                <span>Số lượng bản ghi/trang</span> &nbsp;
                <select class="form-control numberPage" (change)="changePageSize($event.target.value,4)">
                  <option selected value="10">10</option>
                  <option value="20">20</option>
                  <option value="50">50</option>
                </select> &nbsp;&nbsp;
              </div>
              <li class="page-item" (click)="setActionPage(pager.pager.currentPage - 1,4)">
                <a class="page-link" href="javascript: void(0)" tabindex="-1">&lt;</a>
              </li>
              <li class="page-item" *ngFor="let page of pager.pager.pages" [ngClass]="{active:pager.pager.currentPage === page}" (click)="setActionPage(page,4)">
                <a class="page-link" href="javascript: void(0)">{{page}}</a>
              </li>
              <li class="page-item" (click)="setActionPage(pager.pager.currentPage + 1,4)">
                <a class="page-link" href="javascript: void(0)">&gt;</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>
