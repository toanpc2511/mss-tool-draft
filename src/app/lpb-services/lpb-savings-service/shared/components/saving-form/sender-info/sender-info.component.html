<ng-template #error let-controlName="controlName" let-controlNameVi="controlNameVi">
  <div *ngIf="form.controls[controlName].invalid &&
                           (form.controls[controlName].dirty || form.controls[controlName].touched)">
    <span class="text-danger mt-1 d-block small">
      <ng-container [ngSwitch]="getFirstError(controlName)" class="text-danger mt-1 d-block small">
        <span *ngSwitchCase="FORM_VAL_ERRORS.REQUIRED">
          {{controlNameVi}} không được bỏ trống
        </span>
        <span *ngSwitchCase="FORM_VAL_ERRORS.NO_EXIST">
          {{controlNameVi}} không hợp lệ
        </span>
        <span *ngSwitchCase="FORM_VAL_ERRORS.NOT_PERSONAL">
          {{controlNameVi}} không phải khách hàng cá nhân
        </span>
        <span *ngSwitchCase="FORM_VAL_ERRORS.FOREIGNER">
          Khách hàng cá nhân là người nước ngoài không được phép mở tài khoản
        </span>
      </ng-container>
    </span>
  </div>
</ng-template>

<app-collapse-section [collapsed]="collapsed" (collapsedChange)="collapsedChange.emit($event)">
  <div area="title">
    <div class="content-title my-3">
      <span class="active text-uppercase mr-2">Thông tin NGƯỜI GỬI</span>
    </div>
  </div>

  <div area="body" [formGroup]="form" class="form-group">
    <div class="row">
      <div class="col col-md-6 col-6">
        <div class="form-group row">
          <span class="col-lg-12 col-form-label textLabel">Số CIF <span class="text-danger">(*)</span></span>
          <span class="col-lg-12">
            <input type="text" class="form-control pr-4" formControlName="senderCif" placeholder="Nhập số CIF"
              [textPattern]="{allowRegex: '[0-9]'}" [maxlength]="20" (blur)="changeCif($event)" (input)="onCifInputChange($event)" />
            <ng-container *ngTemplateOutlet="error; context: {controlName: 'senderCif', controlNameVi: 'Số CIF'}">
            </ng-container>
          </span>
        </div>

        <div class="form-group row">
          <span class="col-lg-12">{{form.controls['senderFullName'].value}}</span>
        </div>
      </div>
      <div class="col col-md-6 col-6">
        <div class="form-group row">
          <span class="col-lg-12 col-form-label textLabel">GTXM <span class="text-danger">(*)</span></span>
          <span class="col-lg-12">
            <app-ng-autocomplete [placeholder]="'Nhập giấy tờ xác minh'" [bindValue]="'docNum'" [bindLabel]="'docNum'"
              [control]="form.controls['senderDocNum']" [httpSearch]="searchDocNumFn" [inputAttrs]="{maxlength: 50}"
              [minTermLength]="8" (changeSelectedItem)="changeCustomerInfo($event)">
            </app-ng-autocomplete>
            <ng-container *ngTemplateOutlet="error; context: {controlName: 'senderDocNum', controlNameVi: 'Số GTXM'}">
            </ng-container>
          </span>
        </div>
        <div class="form-group row">
          <span class="col-lg-12">
            <div class="form-radio-inline-group d-flex align-items-start">
              <label class="txtLabel form-radio-inline d-flex align-items-center" *ngFor="let item of DOC_TYPES">
                <input class="form-control" formControlName="senderDocType" name="senderDocType" type="radio"
                  [value]="item.key">
                {{item.value}}
              </label>
            </div>
          </span>
        </div>
      </div>
    </div>
  </div>
</app-collapse-section>
