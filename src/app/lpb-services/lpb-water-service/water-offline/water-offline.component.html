<div class="p-4" *ngIf="!isKSV">
    <div class="text-center text-high-light text-uppercase fw-bolder h5 ">Danh sách File Upload dữ liệu khách hàng</div>
    <hr>
    <div class="d-flex justify-content-center ">
        <form [formGroup]="formSearch" (ngSubmit)="search()" class="w-form-search">
            <div class="d-flex align-items-center">
                <label for="" class="text-high-light fw-bolder w-label">Chọn đối tác</label>
                <div class="flex-grow-1">
                    <app-lpb-select2 [apiUrl]="'/water-service/supplier/offline'" labelName="supplierName"
                        bindValue="supplierCode" formControlName="supplierCode"
                        placeholder="Chọn nhà cung cấp"></app-lpb-select2>
                </div>
            </div>
            <div class="d-flex mt-2 align-items-center">
                <label for="" class="text-high-light fw-bolder w-label">Trạng thái</label>
                <div class="flex-grow-1">
                    <app-lpb-select2 [items]="statuss" labelName="label" bindValue="value" formControlName="status"
                        placeholder="Chọn trạng thái">
                    </app-lpb-select2>
                </div>
            </div>
            <div class="text-center mt-3">
                <button class="btn lpb-btn-primary"><i class="fa fa-search"></i> Tìm kiếm</button>
            </div>
        </form>
    </div>

    <div class="mt-5">
        <app-lpb-datatable [config]="config" [searchConditions]="searchConditions" [columns]="columns" (viewAction)="onViewDetail($event)" (deleteAction)="onDelete($event)"
            [isDisabledDelete]="isDisabledDelete" apiServiceURL="/water-service/import/offline" tableName="Danh sách File Upload"></app-lpb-datatable>
    </div>
</div>

<div class="transaction-main mt-4" *ngIf="isKSV">
  <div
    class="w-100 text-uppercase d-flex justify-content-between"
  >
    <div class="content-title d-flex align-items-center">
      <i class="fa fa-search mr-2"></i>
      <span class="">Tìm kiếm giao dịch</span>
    </div>
  </div>

  <div class="search px-4 mt-2">
    <form [formGroup]="formSearch" (ngSubmit)="search()" *ngIf="isKSV">
      <div class="row">
        <div class="col-12 col-md-6 col-lg-4 pb-3 px-4">
          <span>Trạng thái</span>
          <app-lpb-select2
            labelName="label" bindValue="value"
            [items]="statuss"
            [config]="{'clearable':false}"
            [formControl]="formSearch.controls['status']"
          >
          </app-lpb-select2>
        </div>
        <div class="col-12 col-md-6 col-lg-4 pb-3 px-4">
          <span>Đối tác</span>
          <app-lpb-select2
            [apiUrl]="'/water-service/supplier/offline'"
            [config]="{isNewApi: true}"
            [formControl]="formSearch.controls['supplierCode']"
            labelName="supplierName" bindValue="supplierCode"
            placeholder="Chọn nhà cung cấp"></app-lpb-select2>
        </div>
      </div>
      <div class="row">
        <div class="col-12 col-md-6 col-lg-4 pb-3 px-4">
          <span>Từ ngày</span>
          <app-lpb-datepicker-new
            [formControl]="formSearch.controls['fromDate']"
            [maxDate]="today"
            [className]="formHelpers.isValidClass(searchControls.fromDate)"
          ></app-lpb-datepicker-new>
          <app-validate [control]="formSearch.controls.fromDate" error="required"
                        message="Từ ngày không được bỏ trống"></app-validate>
          <div *ngIf="formSearch.errors?.dateRange">
            <small  class="text-danger mt-1 d-block font-weight-bold">
              Từ ngày phải nhỏ hơn hoặc bằng Đến ngày
            </small>
          </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4 pb-3 px-4">
          <span>Đến ngày</span>
          <app-lpb-datepicker-new
            [formControl]="formSearch.controls['toDate']"
            [maxDate]="today"
            [className]="formHelpers.isValidClass(searchControls.toDate)"
          ></app-lpb-datepicker-new>
          <app-validate [control]="formSearch.controls.toDate" error="required"
                        message="Đến ngày không được bỏ trống"></app-validate>
          <div *ngIf="formSearch.errors?.dateRange">
            <small  class="text-danger mt-1 d-block font-weight-bold">
              Đến ngày phải lớn hơn hoặc bằng Từ ngày
            </small>
          </div>
        </div>
      </div>
      <div class="w-full d-flex justify-content-center gap-2">
        <button
          mat-raised-button
          type="submit"
          class=" bg-btn__blue text-while"
        >
          <i class="fa fa-search mr-2" style="color: #b1afaf"></i>
          Tìm kiếm
        </button>
        <button
          mat-raised-button
          (click)="resetForm()"
          class=" ml-2"
          style="color: #0c258a"
        >
          <i class="fa fa-rotate-left mr-2" style="color: #0c258a"></i>
          Nhập lại
        </button>
      </div>
    </form>
  </div>
  <div class="mt-4">

    <app-lpb-datatable [config]="config" [searchConditions]="searchConditions" [columns]="columns" (viewAction)="onViewDetail($event)"
                       apiServiceURL="/water-service/import/offline" tableName="Danh sách File Upload"></app-lpb-datatable>
  </div>
</div>
