<div class="card card-custom gutter-b mt-1">
  <div class="card-header">
    <div class="card-title">
      <h3 class="card-label">Danh sách hợp đồng</h3>
    </div>

    <div class="card-toolbar row">
      <div class="search-form">
        <i class="flaticon-search"></i>
        <input
          type="text"
          name="searchText"
          placeholder="Search..."
          class="form-control"
          [formControl]="searchFormControl"
        />
      </div>
      <button type="button" class="btn btn-primary" (click)="createContract()">Thêm mới</button>
    </div>
  </div>
  <div class="card-body">
    <div class="table-responsive angular-bootstrap-table">
      <table class="table table-head-custom table-vertical-center overflow-hidden">
        <thead>
        <th>
          Mã hợp đồng
          <app-sort-icon
            column="code"
            [activeColumn]="sortData?.fieldSort"
            [activeDirection]="sortData?.directionSort"
            (sort)="sort($event)"
          ></app-sort-icon>
        </th>
        <th>
          Tên hợp đồng
          <app-sort-icon
            column="name"
            [activeColumn]="sortData?.fieldSort"
            [activeDirection]="sortData?.directionSort"
            (sort)="sort($event)"
          ></app-sort-icon>
        </th>
        <th>
          Loại hợp đồng
          <app-sort-icon
            column="contractType"
            [activeColumn]="sortData?.fieldSort"
            [activeDirection]="sortData?.directionSort"
            (sort)="sort($event)"
          ></app-sort-icon>
        </th>
        <th>
          Ngày tạo
          <app-sort-icon
            column="effectStartDate"
            [activeColumn]="sortData?.fieldSort"
            [activeDirection]="sortData?.directionSort"
            (sort)="sort($event)"
          ></app-sort-icon>
        </th>
        <th>
          Ngày hết hạn
          <app-sort-icon
            column="effectEndDate"
            [activeColumn]="sortData?.fieldSort"
            [activeDirection]="sortData?.directionSort"
            (sort)="sort($event)"
          ></app-sort-icon>
        </th>
        <th>
          Trạng thái
          <app-sort-icon
            column="status"
            [activeColumn]="sortData?.fieldSort"
            [activeDirection]="sortData?.directionSort"
            (sort)="sort($event)"
          ></app-sort-icon>
        </th>
        </thead>
        <tbody>
        <tr *ngFor="let item of dataSource" (click)='viewDetalContract()'>
          <td class="code">
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.code">
              {{ item.code }}
            </p>
          </td>

          <td class="name">
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.name">
              {{ item.name }}
            </p>
          </td>

          <td class="contractType">
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.contractType.type">
              {{ item.contractType.type }}
            </p>
          </td>
          <td class="effectStartDate">
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.effectStartDate">
              {{ item.effectStartDate }}
            </p>
          </td>
          <td class="effectEndDate">
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.effectEndDate">
              {{ item.effectEndDate }}
            </p>
          </td>

          <td class="status">
              <span
                class="label label-lg label-inline"
                [class.label-light-success]="item.status === status.ACCEPTED"
                [class.label-light-danger]="item.status === status.REJECT"
                [class.label-light-warning]="item.status === status.WAITING_ACCEPT"
              >
                <ng-container *ngIf="item.status === status.ACCEPTED">Đã duyệt</ng-container>
                <ng-container *ngIf="item.status === status.REJECT">Đã từ chối</ng-container>
                <ng-container *ngIf="item.status === status.WAITING_ACCEPT">Chờ phê duyệt</ng-container>
              </span>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    <app-paginator [paginator]="paginatorState" (paginate)="pagingChange($event)"></app-paginator>
  </div>
</div>
