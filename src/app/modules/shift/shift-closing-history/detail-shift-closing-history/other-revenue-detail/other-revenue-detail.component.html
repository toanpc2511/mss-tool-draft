<div class="mt-1 card card-custom gutter-b">
  <div class="revenue-detail">
    <div class="card-header">
      <div class="card-title pt-3">
        <h3 class="title">Doanh thu hàng hóa khác</h3>
      </div>
    </div>

    <div class="card-body">
      <div class="table-responsive angular-bootstrap-table">
        <table class="table table-head-custom table-vertical-center overflow-hidden" aria-label="">
          <thead>
          <th scope="">Tên sản phẩm</th>
          <th scope="">Đơn vị</th>
          <th scope="" class='head-inventory text-right'>Tồn đầu</th>
          <th scope="">Nhập</th>
          <th scope="">Xuất</th>
          <th scope="" class='text-right'>Tồn cuối</th>
          <th scope="" class='text-right'>Đơn giá</th>
          <th scope="" class='text-right'>Thành tiền</th>
          </thead>

          <tbody>
          <tr *ngFor="let item of dataSource.controls; let i = index" [formGroup]="item">
            <td class="name">
              <p
                class="cursor-pointer text-ellipsis"
                placement="top"
                [ngbTooltip]="item.get('productName').value"
              >
                {{ item.get('productName').value }}
              </p>
            </td>
            <td class="unit">
              <p
                class="cursor-pointer text-ellipsis"
                placement="top"
                [ngbTooltip]="item.get('unit').value"
              >
                {{ item.get('unit').value }}
              </p>
            </td>
            <td class="head-inventory text-right">
              <p
                class="cursor-pointer text-ellipsis"
                placement="top"
                [ngbTooltip]="item.get('headInventory').value.toLocaleString('en-US')"
              >
                {{ item.get('headInventory').value.toLocaleString('en-US') }}
              </p>
            </td>
            <td class="import-quantity">
              <input
                class="form-control"
                formControlName="importQuantity"
                placeholder="Nhập số lượng nhập"
                decimal-mask
                maxlength="13"
                (input)='countFinalInventory(i)'
              />
              <app-validate
                [control]="item.get('importQuantity')"
                [error]="'required'"
                [message]="'Số lượng nhập không được để trống'"
              ></app-validate>
            </td>
            <td class="export-quantity">
              <input
                class="form-control"
                formControlName="exportQuantity"
                placeholder="Nhập số lượng xuất"
                decimal-mask
                maxlength="13"
                (input)='countFinalInventory(i)'
              />
              <app-validate
                [control]="item.get('exportQuantity')"
                [error]="'required'"
                [message]="'Số lượng xuất không được để trống'"
              ></app-validate>
            </td>
            <td class="final-inventory text-right">
              <p
                class="cursor-pointer text-ellipsis"
                placement="top"
                [ngbTooltip]="item.get('finalInventory').value.toLocaleString('en-US')"
              >
                {{ item.get('finalInventory').value.toLocaleString('en-US') }}
              </p>
            </td>
            <td class="price text-right">
              <p
                class="cursor-pointer text-ellipsis"
                placement="top"
                [ngbTooltip]="item.get('price').value.toLocaleString('en-US')"
              >
                {{ item.get('price').value.toLocaleString('en-US') }}
              </p>
            </td>
            <td class="total-money text-right">
              <p
                class="cursor-pointer text-ellipsis"
                placement="top"
                [ngbTooltip]="item.get('totalMoney').value.toLocaleString('en-US')"
              >
                {{ item.get('totalMoney').value.toLocaleString('en-US') }}
              </p>
            </td>
          </tr>
          </tbody>

          <tfoot>
          <tr  *ngIf="dataSource?.length === 0">
            <td colspan="13" class="text-center" style="color: #ccc">Không có bản ghi nào</td>
          </tr>
          <tr>
            <td colspan='6' class='text-right'>
              <strong>Tổng:</strong>
            </td>
            <td colspan='2' class='text-right'>
              <p
                class="cursor-pointer text-ellipsis"
                placement="top"
                [ngbTooltip]="totalMoney.toLocaleString('en-US')"
              >
                <strong>{{totalMoney.toLocaleString('en-US')}}</strong>
              </p>
            </td>
          </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>

  <div class="py-5 w-100 d-flex justify-content-center">
    <button
      class="m-2 btn btn-primary font-weight-bold"
      (click)='onSubmit()'
    >
      Xác nhận
    </button>
  </div>
</div>
