<div class="modal-content">
  <div class="modal-header">
    <div class="modal-title h4">{{data.title}}</div>
    <div class="close-icon" (click)="modal.dismiss()"></div>
  </div>

  <div class="modal-body">
    <div class="overlay overlay-block cursor-default modal-body" style="min-height: 404px">
      <div class="form-group row">
        <div class='col-lg-6'>
          <div class='row pb-3'>
            <div class='col-lg-3'>Mã bồn</div>
            <div class='col-lg-9'>
              <strong>{{dataSource?.code}}</strong>
            </div>
          </div>
          <div class='row pb-3'>
            <div class='col-lg-3'>Tên bồn</div>
            <div class='col-lg-9'>
              <strong>{{dataSource?.name}}</strong>
            </div>
          </div>
          <div class='row pb-3'>
            <div class='col-lg-3'>Dung tích</div>
            <div class='col-lg-9'>
              <strong>{{dataSource?.capacity}}</strong>
            </div>
          </div>
          <div class='row pb-3'>
            <div class='col-lg-3'>Chiều cao</div>
            <div class='col-lg-9'>
              <strong>{{dataSource?.height}}</strong>
            </div>
          </div>
          <div class='row pb-3'>
            <div class='col-lg-3'>Chiều dài</div>
            <div class='col-lg-9'>
              <strong>{{dataSource?.length}}</strong>
            </div>
          </div>
        </div>

        <div class='col-lg-6'>
          <div class="w-100 d-flex justify-content-center">
            <button class="btn btn-primary font-weight-bold mr-3">
              Tải mẫu nhập Barem
            </button>
            <button class="btn btn-primary font-weight-bold" (click)="baremFile.click()">
              Nhập dữ liệu Barem
            </button>

            <input hidden type="file" accept=".xlsx" #baremFile (change)="onFileChange($event)"/>
          </div>
        </div>
      </div>

      <div class="form-group row" *ngIf='fileContent.length === 0'>
        <div class="overlay overlay-block">
          <div class="py-3">
            <div class="title-card pb-3">
              <label class='title'>Thông tin Barem</label>
            </div>

            <div class="body-card px-5">
              <table class="table table-head-custom table-vertical-center overflow-hidden" aria-label="">
                <thead>
                <tr>
                  <th>Số thứ tự</th>
                  <th class='text-right'>Chiều cao (cm)</th>
                  <th class='text-right'>Thể tích (L)</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let item of dataSource?.scales, let i = index">
                  <td>{{i+1}}</td>

                  <td class="height text-right">
                    <p
                      class="cursor-pointer text-ellipsis"
                      placement="top"
                      [ngbTooltip]="item.height | number | vnCurrency"
                    >
                      {{ item.height | number | vnCurrency }}
                    </p>
                  </td>

                  <td class="number-of-lit text-right">
                    <p
                      class="cursor-pointer text-ellipsis"
                      placement="top"
                      [ngbTooltip]="item.numberOfLit | number | vnCurrency"
                    >
                      {{ item.numberOfLit | number | vnCurrency }}
                    </p>
                  </td>
                </tr>
                </tbody>

                <tfoot *ngIf="dataSource?.length === 0">
                <tr>
                  <td colspan="3" class="text-center" style="color: #ccc">Không có bản ghi nào</td>
                </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group row" *ngIf='fileContent.length > 0'>
        <div class="overlay overlay-block">
          <div class="py-3">
            <div class="title-card pb-3">
              <label class='title'>Thông tin Barem</label>
            </div>

            <div class="body-card px-5">
              <table class="table table-head-custom table-vertical-center overflow-hidden" aria-label="">
                <thead>
                <tr>
                  <th>Số thứ tự</th>
                  <th class='text-right'>Chiều cao (cm)</th>
                  <th class='text-right'>Thể tích (L)</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let row of fileContent, let i = index">
                  <td>{{i+1}}</td>
                  <td *ngFor="let val of row" class='text-right'>
                    {{ val | number | vnCurrency}}
                  </td>
                </tr>
                </tbody>

                <tfoot *ngIf="dataSource?.length === 0">
                <tr>
                  <td colspan="3" class="text-center" style="color: #ccc">Không có bản ghi nào</td>
                </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-secondary btn-dialog mr-2"
      (click)="modal.close()"
    >
      Hủy
    </button>

    <button
      type="button"
      (click)="onSubmit()"
      class="btn btn-primary btn-dialog"
      [disabled]='isDisabled'
    >
      Lưu
    </button>
  </div>
</div>
