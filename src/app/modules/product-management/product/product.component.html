<div class="card card-custom gutter-b">
	<div class="card-header">
		<div class="card-title">
			<h3 class="card-label">Thêm mới sản phẩm</h3>
		</div>
	</div>

	<div class="card-body">
		<form [formGroup]="productForm">
			<div class="form-group row">
				<div class="col-lg-4">
					<label class="form-label required">Mã sản phẩm</label>
					<input
						type="text"
						class="form-control"
						placeholder="Nhập mã sản phẩm"
						autocomplete="off"
						formControlName="model"
					/>
					<app-validate
						[control]="productForm.controls['model']"
						error="required"
						message="Chưa nhập mã sản phẩm"
					></app-validate>
				</div>
				<div class="col-lg-4">
					<label class="form-label required">Tên sản phẩm</label>
					<input
						type="text"
						class="form-control"
						placeholder="Nhập tên sản phẩm"
						autocomplete="off"
						formControlName="name"
					/>
					<app-validate
						[control]="productForm.controls['name']"
						error="required"
						message="Chưa nhập tên sản phẩm"
					></app-validate>
				</div>
				<div class="col-lg-4">
					<label class="form-label">Loại sản phẩm</label>
					<select class="form-control" formControlName="category">
						<option value="">-- Chọn loại sản phẩm --</option>
						<option *ngFor="let item of categories" [value]="item.id">{{ item.name }}</option>
					</select>
					<app-validate
						[control]="productForm.controls['category']"
						error="required"
						message="Chưa chọn loại sản phẩm"
					></app-validate>
				</div>
			</div>

			<div class="form-group row">
				<div class="col-lg-4">
					<label class="form-label required">Giá sản phẩm</label>
					<input
						type="text"
						class="form-control"
						placeholder="Nhập giá sản phẩm"
						autocomplete="off"
						formControlName="price"
						decimal-mask
						trim="blur"
						(keydown.space)="$event.preventDefault()"
					/>
				</div>
				<div class="col-lg-4">
					<label class="form-label required">Giảm giá (%)</label>
					<input
						type="text"
						class="form-control"
						placeholder="Nhập % sale"
						autocomplete="off"
						formControlName="sales"
						maxlength="3"
						decimal-mask
						trim="blur"
						(keydown.space)="$event.preventDefault()"
					/>
					<app-validate
						[control]="productForm.controls['sales']"
						error="required"
						message="Chưa nhập % sale"
					></app-validate>
					<app-validate
						[control]="productForm.controls['sales']"
						error="maxSale"
						message="Giảm giá quá số tiền hiện tại"
					></app-validate>
				</div>
			</div>

			<div class="form-group row">
				<div class="col-12">
					<label for="img" class="form-label required">Ảnh sản phẩm</label>
					<input
						hidden
						type="file"
						id="img"
						accept="image/*"
						#bannerImg
						(change)="addImage($event)"
						multiple
					/>
					<img
						alt="Ảnh đính kèm"
						class="img"
						(click)="bannerImg.click()"
						width="100"
						height="80"
						[src]="url || 'http://placehold.it/180'"
						*ngIf="urls.length <= 0"
					/>
					<div class="" *ngIf="urls.length > 0">
						<img
							*ngFor="let url of urls"
							[src]="url"
							alt=""
							width="100"
							height="80"
							(click)="bannerImg.click()"
						/>
					</div>
				</div>
			</div>
			<div id="preview"></div>

			<div class="form-group row">
				<div class="col-12">
					<label class="form-label required">Mô tả</label>
					<angular-editor
						id="editor"
						[config]="config"
						formControlName="description"
					></angular-editor>
					<app-validate
						[control]="productForm.controls['description']"
						[error]="'required'"
						[message]="'Nội dung không được để trống'"
					></app-validate>
				</div>
			</div>
		</form>

		<div class="row py-3 m-auto footer">
			<button type="button" class="btn btn-secondary btn-def mx-2" (click)="onBack()">
				Quay lại
			</button>
			<button type="button" class="btn btn-primary btn-def mx-2" (click)="onSave()">Lưu</button>
		</div>
	</div>
</div>
