<div class="card card-custom gutter-b mt-1">
  <div class="card-header">
    <div class="card-title">
      <h3 class="card-label">Tìm kiếm sản phẩm</h3>
    </div>
  </div>

  <div class="card-body">
    <form [formGroup]='searchForm'>
      <div class="form-group row px-3">
        <div class="col-lg-4">
          <label>Nhóm sản phẩm</label>
          <select
            class="form-control form-control-solid form-control-lg"
            formControlName='productType'
          >
            <option [value]="null">Tất cả</option>
            <option *ngFor='let item of productTypes' [value]='item.id'>{{item.name}}</option>
          </select>
        </div>

        <div class="col-lg-4">
          <label>Tên sản phẩm</label>
          <input
            type="text"
            class="form-control form-control-solid form-control-lg"
            placeholder="Nhập tên sản phẩm"
            formControlName='productName'
            autocomplete="off"
            maxlength="199"
            trim="blur"
          />
        </div>

        <div class="col-lg-4">
          <label>Giá nhập</label>
          <div class="input-group">
            <input type="text" class="form-control form-control-solid form-control-lg text-center" placeholder='Từ' formControlName='importPriceFrom'>
            <div class="input-group-prepend input-group-append">
              <span class="input-group-text"> -> </span>
            </div>
            <input type="text" class="form-control form-control-solid form-control-lg text-center" placeholder='Đến' formControlName='importPriceTo'>
          </div>
        </div>
      </div>

      <div class="form-group row px-3">
        <div class="col-lg-4">
          <label>Mã sản phẩm</label>
          <input
            type="text"
            class="form-control form-control-solid form-control-lg"
            placeholder="Nhập mã sản phẩm"
            formControlName='productCode'
            autocomplete="off"
            maxlength="199"
            trim="blur"
          />
        </div>

        <div class="col-lg-4">
          <label>Trạng thái</label>
          <select
            class="form-control form-control-solid form-control-lg"
            formControlName='status'
          >
            <option [value]="null">Tất cả</option>
            <option [value]="listStatus.ACTIVE">Hoạt động</option>
            <option [value]="listStatus.INACTIVE">Không hoạt động</option>
          </select>
        </div>

        <div class="col-lg-4">
          <label>Giá bán</label>
          <div class="input-group">
            <input type="text" class="form-control form-control-solid form-control-lg text-center" placeholder='Từ' formControlName='exportPriceFrom'>
            <div class="input-group-prepend input-group-append">
              <span class="input-group-text" id=""> -> </span>
            </div>
            <input type="text" class="form-control form-control-solid form-control-lg text-center" placeholder='Đến' formControlName='exportPriceTo'>
          </div>
        </div>
      </div>

      <div class="form-group row px-3">
        <div class="col-lg-4">
          <label>Tạo QR code</label>
          <select
            class="form-control form-control-solid form-control-lg"
            formControlName='qrCode'
          >
            <option value="null">Tất cả</option>
            <option value='0'>Đã tạo</option>
            <option value='1'>Chưa tạo</option>
          </select>
        </div>
      </div>
    </form>

    <div class="form-group row mx-3">
      <button type="button" class="btn btn-primary mr-3" (click)="onSearch()">
        <em class="fas fa-search"> Tìm kiếm</em>
      </button>
      <button type="button" class="btn btn-secondary" (click)="onReset()">Nhập lại</button>
    </div>
  </div>
</div>

<div class="card card-custom gutter-b mt-1">
  <div class="card-header">
    <div class="card-title">
      <h3 class="card-label">Danh sách sản phẩm</h3>
    </div>

    <div class="card-toolbar row">
      <button type="button" class="btn btn-primary" (click)="createModal()">Thêm mới</button>
    </div>
  </div>

  <div class="card-body">
    <div class="table-responsive angular-bootstrap-table">
      <table class="table table-head-custom table-vertical-center overflow-hidden" aria-label="">
        <thead>
        <th class='' scope="">
          Mã sản phẩm
        </th>
        <th class='' scope="">
          Nhóm sản phẩm
        </th>
        <th class='' scope="">
          Tên sản phẩm
        </th>
        <th class='' scope="">
          Giá nhập
        </th>
        <th class='' scope="">
          Giá bán
        </th>
        <th class='' scope="">
          Đơn vị
        </th>
        <th class='' scope="">
          VAT (%)
        </th>
        <th class='' scope="">
          Trạng thái
        </th>
        <th class='' scope="">
          Tạo QR code
        </th>
        <th class='' scope="">
          Tác động
        </th>
        </thead>

        <tbody>
        <tr *ngFor='let item of dataSource'>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.productCode">
              {{ item.productCode }}
            </p>
          </td>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.productType">
              {{ item.productType }}
            </p>
          </td>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.productName">
              {{ item.productName }}
            </p>
          </td>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.importPrice.toLocaleString('en-US')">
              {{ item.importPrice.toLocaleString('en-US') }}
            </p>
          </td>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.exportPrice.toLocaleString('en-US')">
              {{ item.exportPrice.toLocaleString('en-US') }}
            </p>
          </td>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.unit">
              {{ item.unit }}
            </p>
          </td>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.vat + '%'">
              {{ item.vat }}
            </p>
          </td>
          <td>
            <span
              class="label label-lg label-inline"
              [class.label-light-success]="item.status === listStatus.ACTIVE"
              [class.label-light-danger]="item.status !== listStatus.ACTIVE"
            >
              <ng-container *ngIf="item.status === listStatus.ACTIVE">Hoạt động</ng-container>
              <ng-container *ngIf="item.status !== listStatus.ACTIVE">
                Không hoạt động
              </ng-container>
            </span>
          </td>
          <td>
            <p class="cursor-pointer text-ellipsis" placement="top" [ngbTooltip]="item.qrCode">
              {{ item.qrCode }}
            </p>
          </td>
          <td>
            <a
              (click)="createModal($event, item)"
              class="btn btn-icon btn-light btn-hover-primary btn-sm mx-3"
            >
                <span
                  [inlineSVG]="'./assets/media/svg/icons/Communication/Write.svg'"
                  cacheSVG="true"
                  class="svg-icon svg-icon-md svg-icon-primary"
                  [ngbTooltip]="'Sửa'"
                >
                </span>
            </a>
            <a
              (click)="deleteProduct($event, item)"
              class="btn btn-icon btn-light btn-hover-danger btn-sm"
            >
                <span
                  [inlineSVG]="'./assets/media/svg/icons/General/Trash.svg'"
                  cacheSVG="true"
                  class="svg-icon svg-icon-md svg-icon-danger"
                  [ngbTooltip]="'Xóa'"
                >
                </span>
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
